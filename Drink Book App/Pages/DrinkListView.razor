@page "/drinklist"

@if(drinks is null)
{
	<Loading></Loading>
}
else
{
    <MudContainer>
        <MudDataGrid T="DrinkDisplayModel" Items="@drinks" ReadOnly="true" 
            SortMode="SortMode.Multiple" QuickFilter="@QuickFilter"
            Striped="true">
            <ToolBarContent>
                <MudText Typo="Typo.h4">Drink List</MudText>
                <MudSpacer />
                <MudTextField @bind-Value="searchString" Placeholder="Search" Adornment="Adornment.Start" Immediate="true"
                          AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
            </ToolBarContent>
            <Columns>
                <TemplateColumn T="DrinkDisplayModel" Title="Name">
                    <CellTemplate>
                        <MudButton Variant="Variant.Text" @onclick="() => NavTo(context.Item.Name,context.Item.Id)">@context.Item.Name</MudButton>
                    </CellTemplate>
                </TemplateColumn>
                <TemplateColumn T="DrinkDisplayModel" Title="Ingredients">
                    <CellTemplate>
                        <MudGrid>
                            @foreach (var i in context.Item.Instructions)
                            {
                                <MudChip Label="true" Value="@i">@i.Ingredient.Name</MudChip>
                            }
                        </MudGrid>
                    </CellTemplate>

                </TemplateColumn>
                <TemplateColumn T="DrinkDisplayModel" Title="Tags">
                    <CellTemplate>
                        <MudGrid>
                            @foreach (var i in context.Item.Tags)
                            {
                                <MudChip Label="true" Value="@i">@i.Value</MudChip>
                            }
                        </MudGrid>
                    </CellTemplate>

                </TemplateColumn>
            </Columns>
            <PagerContent>
                <MudDataGridPager T="DrinkDisplayModel"></MudDataGridPager>
            </PagerContent>

        </MudDataGrid>

    </MudContainer>
    
}
