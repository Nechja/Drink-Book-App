@attribute [Authorize(Roles = "Admin, Mod")]
@page "/drinktools/ingredient-types"

<MudCard>
	<MudCardContent>
		<EditForm Model="@IngredientDisplay" OnValidSubmit="ValidSubmit">
			<DataAnnotationsValidator />
			<ValidationSummary />
			@if(errorValid != null)
			{
				<label class="alert-warning">@errorValid</label>
			}
			<label for="Name">Name of Ingredient Type</label>
			<InputText @bind-Value=IngredientDisplay.Name class="form-control" id="Name"></InputText>
			@if (IngredientDisplay.Id == 0)
			{
				<input type="submit" class="btn btn-dark" value="Add" />
			}
			else
			{
				<input type="submit" class="btn btn-dark" value="Update" />
			}
		</EditForm>
	</MudCardContent>
</MudCard>
@if(ingredientTypes is null)
{
	<MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-7" />
}
else
{
	<MudCard>
		<MudCardContent>
			<MudList>
				@foreach (IngredientTypeDisplayModel i in ingredientTypes)
				{
					<MudPaper Elevation="1" Square="true">
						<MudStack Row="true" Justify="Justify.SpaceBetween">
							<MudPaper Elevation="0">
								<MudChip Label="true" Color="Color.Transparent" Variant="Variant.Text" Text="@i.Name"></MudChip>
							</MudPaper>
							<MudButtonGroup Color="Color.Dark" Variant="Variant.Text">
								<MudIconButton Icon="@Icons.Material.Filled.Delete" aria-label="delete" @onclick="() => DeleteType(i.Id)"></MudIconButton>
								<MudIconButton Icon="@Icons.Material.Filled.Edit" aria-label="edit" @onclick="() => EditType(i)"></MudIconButton>
							</MudButtonGroup>

						</MudStack>
						<MudPaper>
						</MudPaper>
					</MudPaper>
				}
			</MudList>
		</MudCardContent>
	</MudCard>
}
