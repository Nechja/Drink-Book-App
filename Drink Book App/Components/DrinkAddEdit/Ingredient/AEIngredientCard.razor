@attribute [Authorize(Roles = "Admin")]
 <MudPaper Elevation="0" >
	<MudPaper Elevation="1" Class="py-8 px-10">
		<EditForm Model="@Ingredient" id="inputarea" 
				class="form-control border-0" 
				OnValidSubmit="HandleValidSubmit" 
				OnInvalidSubmit="HandleInvalidSubmit">
		<DataAnnotationsValidator />
		<ValidationSummary />
			@if (!String.IsNullOrEmpty(ErrorText))
			{
				<MudAlert Severity="Severity.Warning">@ErrorText</MudAlert>
			}
		<MudStack Spacing="3">
		<MudCard Elevation="1" Class="py-8 px-10">
			<MudCardHeader>Ingredient</MudCardHeader>
			<MudCardContent >
				<MudItem xs="12" sm="6" md="4">
					<MudTextField @bind-Value="Ingredient.Name" Label="Ingredient Name" Variant="Variant.Text" @onkeypress=KeyStop></MudTextField>
					<CascadingValue Value="Ingredient.IngredientType">
						<IngredientTypeDropDown OnSelectIngredient="OnSelectIngredientChange" />
					</CascadingValue>
				</MudItem>
			</MudCardContent>
		</MudCard>
		<CascadingValue Value="Ingredient.Tags">
			<Tagging TagType="@nameof(IngredientDisplayModel)"
					 OnSelectTag="OnSelectTagsChanged"></Tagging>
		</CascadingValue>
			</MudStack>
			<MudDivider DividerType="DividerType.FullWidth" />

		@if (Ingredient.Id == 0)
		{
				<input type="submit" class="btn btn-dark" @onkeypress="KeyStop" value="Add" />
		}
		else
		{
				<input type="submit" class="btn btn-dark" @onkeypress="KeyStop" value="Edit" />
		}
	</EditForm>
	</MudPaper>
		@if (Ingredients is null)
		{
			<MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-7" />
		}
		else
		{
	<div class="card">
		<div class="card-body">
			<ul class="list-group list-group-flush">
					@foreach (IngredientDisplayModel i in Ingredients)
					{
						<MudPaper Elevation="1" Square="true">
							<MudStack Row="true" Justify="Justify.SpaceBetween">
								<MudPaper Elevation="0">
									<MudChip Label="true" Color="Color.Transparent" Variant="Variant.Text" Text="@i.Name"></MudChip>
								</MudPaper>
								<MudButtonGroup Color="Color.Dark" Variant="Variant.Text">
									<MudIconButton Icon="@Icons.Material.Filled.Delete" aria-label="delete"></MudIconButton>
									<MudIconButton Icon="@Icons.Material.Filled.Edit" aria-label="edit" @onclick="() => OnEdit(i)"></MudIconButton>
								</MudButtonGroup>

							</MudStack>
							<MudPaper>
							</MudPaper>
						</MudPaper>
					}
			</ul>
		</div>
	</div>
		}

</MudPaper>